{
  "hash": "032e9fa3820a45d46b9da4c74810c12f",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Project1-Crime\"\nauthor: \"5조(내이름은코난탐정이조)-윤대웅,이다경,이승학,이예솔\"\ndate: \"2024-07-29\"\ncategories: [Team_Project]\n---\n\n\n### **어느 요일이 범죄로부터 가장 안전할까?**\n\n**[2018~2022년 강력/폭력/지능범죄의 요일별 발생 건수 데이터](https://docs.google.com/spreadsheets/d/1boOUSKywiaQG2INgUrAhlV5O-tHBQDNVLQ-QvdCr55U/edit?usp=sharing)**\n\n::: {.callout-note icon=false}\n\n## 가설 \n\n**평일이 상대적으로 안전할 것이다.**\n\n:::\n\n::: {.callout-tip icon=false}\n\n## [범죄의 정의](https://docs.google.com/spreadsheets/d/1boOUSKywiaQG2INgUrAhlV5O-tHBQDNVLQ-QvdCr55U/edit?gid=1615286912#gid=1615286912)\n\n* **강력범죄** : 생명, 신체, 자유에 심각한 위협을 가하는 범죄\n* **폭력범죄** : 다른 사람에게 신체적 상해를 입히거나 신체적 위협을 가하는 범죄\n* **지능범죄** : 지적 능력과 계획을 통해 이루어지며, 주로 경제적 이득을 얻기 위한 범죄\n\n:::\n\n---\n\n### **[데이터 로드]**\n\n::: {#ce344bb8 .cell execution_count=1}\n``` {.python .cell-code}\n# 0. 패키지 로드\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# 1. 데이터 파일 불러오기, 원본 데이터 복사하기\n## header: 원본의 두 번째 행 데이터를 열의 이름으로 지정\n## encoding: UnicodeDecodeError 발생으로 한글 표현 가능한 인코딩 방식인 EUC-KR 지정\n## pd.set_option(): 전체 열을 모두 표시하도록 지정\npd.set_option('display.max_columns', None)\ndf = pd.read_csv('crime.csv', header = 1, encoding = 'EUC-KR')\ndf.head()\n\n# 2. 원본 데이터 복사하기\n## deepcopy로 원본유지\ncrime = df.copy()\n```\n:::\n\n\n### **[변수명 변경]**\n\n::: {#57f30104 .cell execution_count=2}\n``` {.python .cell-code}\n# 3. 열 이름, 원소 이름 변경\n## 열 이름 변경\n### 강력범죄는 s_, 폭력범죄는 g_, 지능범죄는 i_로 시작하도록 변경\ncrime.columns\ncrime.columns = ['year','day']\\\n                + [i.replace(i, \"s_\"+i) for i in crime.columns[2:10]]\\\n                + [i.replace(i, \"g_\"+i) for i in crime.columns[10:18]]\\\n                + [i.replace(i, \"i_\"+i) for i in crime.columns[18:27]]\n\n## 원소 이름 변경\n## replace(): 요일을 영어로 일괄 변경\ncrime = crime.replace({'월요일':'mon',\n                       '화요일':'tue',\n                       '수요일':'wed',\n                       '목요일':'thu',\n                       '금요일':'fri',\n                       '토요일':'sat',\n                       '일요일':'sun'})\ncrime.head(7)\n\n## reindex(): 행의 순서 바꾸기(일>토에서 월>일로) > 추후 그래프 순서를 위해서 설정\nlen(crime)\ncrime = crime.reindex([1, 2, 3, 4, 5, 6, 0,\n                       8, 9, 10, 11, 12, 13, 7,\n                       15, 16, 17, 18, 19, 20, 14,\n                       22, 23, 24, 25, 26, 27, 21,\n                       29, 30, 31, 32, 33, 34, 28])\ncrime.head(7)\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>year</th>\n      <th>day</th>\n      <th>s_살인기수</th>\n      <th>s_살인미수등</th>\n      <th>s_강도</th>\n      <th>s_강간</th>\n      <th>s_유사강간</th>\n      <th>s_강제추행</th>\n      <th>s_기타 강간·강제추행등</th>\n      <th>s_방화</th>\n      <th>g_상해</th>\n      <th>g_폭행</th>\n      <th>g_체포·감금</th>\n      <th>g_협박</th>\n      <th>g_약취·유인</th>\n      <th>g_폭력행위등</th>\n      <th>g_공갈</th>\n      <th>g_손괴</th>\n      <th>i_직무유기</th>\n      <th>i_직권남용</th>\n      <th>i_증수뢰</th>\n      <th>i_통화</th>\n      <th>i_문서·인장</th>\n      <th>i_유가증권인지</th>\n      <th>i_사기</th>\n      <th>i_횡령</th>\n      <th>i_배임</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>1</th>\n      <td>2018</td>\n      <td>mon</td>\n      <td>40</td>\n      <td>74</td>\n      <td>120</td>\n      <td>698</td>\n      <td>113</td>\n      <td>2197</td>\n      <td>51</td>\n      <td>236</td>\n      <td>5326</td>\n      <td>20195</td>\n      <td>168</td>\n      <td>2462</td>\n      <td>34</td>\n      <td>1175</td>\n      <td>685</td>\n      <td>7452</td>\n      <td>105</td>\n      <td>96</td>\n      <td>53</td>\n      <td>230</td>\n      <td>2202</td>\n      <td>20</td>\n      <td>45478</td>\n      <td>7968</td>\n      <td>802</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2018</td>\n      <td>tue</td>\n      <td>38</td>\n      <td>62</td>\n      <td>133</td>\n      <td>709</td>\n      <td>103</td>\n      <td>2263</td>\n      <td>48</td>\n      <td>263</td>\n      <td>5649</td>\n      <td>21334</td>\n      <td>189</td>\n      <td>2530</td>\n      <td>27</td>\n      <td>1205</td>\n      <td>644</td>\n      <td>7767</td>\n      <td>92</td>\n      <td>110</td>\n      <td>57</td>\n      <td>226</td>\n      <td>1992</td>\n      <td>25</td>\n      <td>45020</td>\n      <td>7793</td>\n      <td>761</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2018</td>\n      <td>wed</td>\n      <td>53</td>\n      <td>68</td>\n      <td>116</td>\n      <td>743</td>\n      <td>96</td>\n      <td>2333</td>\n      <td>49</td>\n      <td>235</td>\n      <td>5395</td>\n      <td>21160</td>\n      <td>180</td>\n      <td>2474</td>\n      <td>26</td>\n      <td>1088</td>\n      <td>604</td>\n      <td>7681</td>\n      <td>92</td>\n      <td>110</td>\n      <td>69</td>\n      <td>208</td>\n      <td>1893</td>\n      <td>30</td>\n      <td>45399</td>\n      <td>7922</td>\n      <td>725</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>2018</td>\n      <td>thu</td>\n      <td>41</td>\n      <td>76</td>\n      <td>117</td>\n      <td>646</td>\n      <td>99</td>\n      <td>2389</td>\n      <td>45</td>\n      <td>246</td>\n      <td>5396</td>\n      <td>21181</td>\n      <td>192</td>\n      <td>2444</td>\n      <td>30</td>\n      <td>1163</td>\n      <td>656</td>\n      <td>7514</td>\n      <td>114</td>\n      <td>110</td>\n      <td>64</td>\n      <td>242</td>\n      <td>2710</td>\n      <td>32</td>\n      <td>45752</td>\n      <td>7992</td>\n      <td>730</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>2018</td>\n      <td>fri</td>\n      <td>54</td>\n      <td>67</td>\n      <td>101</td>\n      <td>699</td>\n      <td>99</td>\n      <td>2547</td>\n      <td>55</td>\n      <td>212</td>\n      <td>5628</td>\n      <td>22423</td>\n      <td>165</td>\n      <td>2408</td>\n      <td>26</td>\n      <td>1206</td>\n      <td>593</td>\n      <td>8591</td>\n      <td>103</td>\n      <td>104</td>\n      <td>61</td>\n      <td>212</td>\n      <td>1991</td>\n      <td>58</td>\n      <td>46698</td>\n      <td>8817</td>\n      <td>790</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>2018</td>\n      <td>sat</td>\n      <td>29</td>\n      <td>69</td>\n      <td>108</td>\n      <td>892</td>\n      <td>139</td>\n      <td>2760</td>\n      <td>59</td>\n      <td>243</td>\n      <td>6267</td>\n      <td>26997</td>\n      <td>151</td>\n      <td>2384</td>\n      <td>15</td>\n      <td>1662</td>\n      <td>457</td>\n      <td>9200</td>\n      <td>36</td>\n      <td>40</td>\n      <td>21</td>\n      <td>42</td>\n      <td>829</td>\n      <td>15</td>\n      <td>22158</td>\n      <td>7819</td>\n      <td>288</td>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>2018</td>\n      <td>sun</td>\n      <td>54</td>\n      <td>72</td>\n      <td>126</td>\n      <td>906</td>\n      <td>127</td>\n      <td>2564</td>\n      <td>49</td>\n      <td>256</td>\n      <td>6105</td>\n      <td>25977</td>\n      <td>162</td>\n      <td>2498</td>\n      <td>29</td>\n      <td>1705</td>\n      <td>457</td>\n      <td>8479</td>\n      <td>39</td>\n      <td>33</td>\n      <td>22</td>\n      <td>34</td>\n      <td>673</td>\n      <td>17</td>\n      <td>19524</td>\n      <td>6802</td>\n      <td>248</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### **[파생변수 추가]**\n\n::: {#61040b76 .cell execution_count=3}\n``` {.python .cell-code}\n# 4. 파생변수 추가\n## 범죄별 건수 합계 및 총 범죄 건수 합계 파생변수\ncrime = crime.assign(\n    total_s = crime.iloc[:, 2:10].sum(axis = 1),\n    total_g = crime.iloc[:, 10:18].sum(axis = 1),\n    total_i = crime.iloc[:, 18:27].sum(axis = 1),\n    total = crime.iloc[:, 2:27].sum(axis = 1))\ncrime.head()\n\n## 평일/주말 구분 라벨 파생변수\n### 평일: 월~금, 주말: 토~일\ncrime['day_label'] = np.where(crime['day'].isin(['mon', 'tue', 'wed', 'thu', 'fri']), \\\n                                                 'week', 'weekend')\ncrime.head(7)\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>year</th>\n      <th>day</th>\n      <th>s_살인기수</th>\n      <th>s_살인미수등</th>\n      <th>s_강도</th>\n      <th>s_강간</th>\n      <th>s_유사강간</th>\n      <th>s_강제추행</th>\n      <th>s_기타 강간·강제추행등</th>\n      <th>s_방화</th>\n      <th>g_상해</th>\n      <th>g_폭행</th>\n      <th>g_체포·감금</th>\n      <th>g_협박</th>\n      <th>g_약취·유인</th>\n      <th>g_폭력행위등</th>\n      <th>g_공갈</th>\n      <th>g_손괴</th>\n      <th>i_직무유기</th>\n      <th>i_직권남용</th>\n      <th>i_증수뢰</th>\n      <th>i_통화</th>\n      <th>i_문서·인장</th>\n      <th>i_유가증권인지</th>\n      <th>i_사기</th>\n      <th>i_횡령</th>\n      <th>i_배임</th>\n      <th>total_s</th>\n      <th>total_g</th>\n      <th>total_i</th>\n      <th>total</th>\n      <th>day_label</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>1</th>\n      <td>2018</td>\n      <td>mon</td>\n      <td>40</td>\n      <td>74</td>\n      <td>120</td>\n      <td>698</td>\n      <td>113</td>\n      <td>2197</td>\n      <td>51</td>\n      <td>236</td>\n      <td>5326</td>\n      <td>20195</td>\n      <td>168</td>\n      <td>2462</td>\n      <td>34</td>\n      <td>1175</td>\n      <td>685</td>\n      <td>7452</td>\n      <td>105</td>\n      <td>96</td>\n      <td>53</td>\n      <td>230</td>\n      <td>2202</td>\n      <td>20</td>\n      <td>45478</td>\n      <td>7968</td>\n      <td>802</td>\n      <td>3529</td>\n      <td>37497</td>\n      <td>56954</td>\n      <td>97980</td>\n      <td>week</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2018</td>\n      <td>tue</td>\n      <td>38</td>\n      <td>62</td>\n      <td>133</td>\n      <td>709</td>\n      <td>103</td>\n      <td>2263</td>\n      <td>48</td>\n      <td>263</td>\n      <td>5649</td>\n      <td>21334</td>\n      <td>189</td>\n      <td>2530</td>\n      <td>27</td>\n      <td>1205</td>\n      <td>644</td>\n      <td>7767</td>\n      <td>92</td>\n      <td>110</td>\n      <td>57</td>\n      <td>226</td>\n      <td>1992</td>\n      <td>25</td>\n      <td>45020</td>\n      <td>7793</td>\n      <td>761</td>\n      <td>3619</td>\n      <td>39345</td>\n      <td>56076</td>\n      <td>99040</td>\n      <td>week</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2018</td>\n      <td>wed</td>\n      <td>53</td>\n      <td>68</td>\n      <td>116</td>\n      <td>743</td>\n      <td>96</td>\n      <td>2333</td>\n      <td>49</td>\n      <td>235</td>\n      <td>5395</td>\n      <td>21160</td>\n      <td>180</td>\n      <td>2474</td>\n      <td>26</td>\n      <td>1088</td>\n      <td>604</td>\n      <td>7681</td>\n      <td>92</td>\n      <td>110</td>\n      <td>69</td>\n      <td>208</td>\n      <td>1893</td>\n      <td>30</td>\n      <td>45399</td>\n      <td>7922</td>\n      <td>725</td>\n      <td>3693</td>\n      <td>38608</td>\n      <td>56448</td>\n      <td>98749</td>\n      <td>week</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>2018</td>\n      <td>thu</td>\n      <td>41</td>\n      <td>76</td>\n      <td>117</td>\n      <td>646</td>\n      <td>99</td>\n      <td>2389</td>\n      <td>45</td>\n      <td>246</td>\n      <td>5396</td>\n      <td>21181</td>\n      <td>192</td>\n      <td>2444</td>\n      <td>30</td>\n      <td>1163</td>\n      <td>656</td>\n      <td>7514</td>\n      <td>114</td>\n      <td>110</td>\n      <td>64</td>\n      <td>242</td>\n      <td>2710</td>\n      <td>32</td>\n      <td>45752</td>\n      <td>7992</td>\n      <td>730</td>\n      <td>3659</td>\n      <td>38576</td>\n      <td>57746</td>\n      <td>99981</td>\n      <td>week</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>2018</td>\n      <td>fri</td>\n      <td>54</td>\n      <td>67</td>\n      <td>101</td>\n      <td>699</td>\n      <td>99</td>\n      <td>2547</td>\n      <td>55</td>\n      <td>212</td>\n      <td>5628</td>\n      <td>22423</td>\n      <td>165</td>\n      <td>2408</td>\n      <td>26</td>\n      <td>1206</td>\n      <td>593</td>\n      <td>8591</td>\n      <td>103</td>\n      <td>104</td>\n      <td>61</td>\n      <td>212</td>\n      <td>1991</td>\n      <td>58</td>\n      <td>46698</td>\n      <td>8817</td>\n      <td>790</td>\n      <td>3834</td>\n      <td>41040</td>\n      <td>58834</td>\n      <td>103708</td>\n      <td>week</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>2018</td>\n      <td>sat</td>\n      <td>29</td>\n      <td>69</td>\n      <td>108</td>\n      <td>892</td>\n      <td>139</td>\n      <td>2760</td>\n      <td>59</td>\n      <td>243</td>\n      <td>6267</td>\n      <td>26997</td>\n      <td>151</td>\n      <td>2384</td>\n      <td>15</td>\n      <td>1662</td>\n      <td>457</td>\n      <td>9200</td>\n      <td>36</td>\n      <td>40</td>\n      <td>21</td>\n      <td>42</td>\n      <td>829</td>\n      <td>15</td>\n      <td>22158</td>\n      <td>7819</td>\n      <td>288</td>\n      <td>4299</td>\n      <td>47133</td>\n      <td>31248</td>\n      <td>82680</td>\n      <td>weekend</td>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>2018</td>\n      <td>sun</td>\n      <td>54</td>\n      <td>72</td>\n      <td>126</td>\n      <td>906</td>\n      <td>127</td>\n      <td>2564</td>\n      <td>49</td>\n      <td>256</td>\n      <td>6105</td>\n      <td>25977</td>\n      <td>162</td>\n      <td>2498</td>\n      <td>29</td>\n      <td>1705</td>\n      <td>457</td>\n      <td>8479</td>\n      <td>39</td>\n      <td>33</td>\n      <td>22</td>\n      <td>34</td>\n      <td>673</td>\n      <td>17</td>\n      <td>19524</td>\n      <td>6802</td>\n      <td>248</td>\n      <td>4154</td>\n      <td>45412</td>\n      <td>27392</td>\n      <td>76958</td>\n      <td>weekend</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### **[범죄별, 평일/주말별 건수 합계 그래프]**\n\n::: {#30972e57 .cell execution_count=4}\n``` {.python .cell-code}\n# 5. (1)발생 건수 합계 기준 그래프\n## 연도 기준 범죄별 건수 합계\n### 그래프 설정\nplt.rcParams.update({'font.family':'Malgun Gothic','font.size' : 10})\nplt.figure(figsize = (8, 6))\n\n### 집단별 합계표 생성\nyear_total = crime.groupby('year')\\\n                  .agg(강력범죄=('total_s','sum'),\n                       폭력범죄=('total_g','sum'),\n                       지능범죄=('total_i','sum'))\n\n### 그래프 생성                       \nyear_total.plot.barh(stacked = True)\nplt.xlabel(\"건수\")\nplt.ylabel(\"연도\")\nplt.title(\"각 범죄 발생 건수 비율 그래프\")\nplt.show()\nplt.clf()\n\n## 평일/주말 기준 건수 합계\n### 평일/주말별 건수 합계표 생성\nweek_end = crime.groupby('day_label', as_index = False) \\\n                .agg(total=('total', 'sum'))\n\n### 그래프 생성                \nsns.barplot(data = week_end, x = 'day_label', y = 'total', hue = 'day_label')\nplt.xlabel(\"평일/주말\")\nplt.ylabel(\"건수(백만)\")\nplt.title(\"평일/주말별 범죄 발생 건수 그래프\")\nplt.show()\nplt.clf()\n```\n\n::: {.cell-output .cell-output-display}\n```\n<Figure size 768x576 with 0 Axes>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-5-output-2.png){width=597 height=449}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-5-output-3.png){width=586 height=450}\n:::\n\n::: {.cell-output .cell-output-display}\n```\n<Figure size 672x480 with 0 Axes>\n```\n:::\n:::\n\n\n::: {.callout-important icon=false}\n## 위 그래프의 한계\n\n**각 범죄별 발생 건수의 볼륨 차이, 평일(5일)/주말(2일) 일수 차이 확인**\n: 따라서, 합계로 비교하는데 오류가 있다는 판단\n:::\n\n### **[범죄별 요일별 건수 비율 그래프]**\n\n::: {#7cd7e27d .cell execution_count=5}\n``` {.python .cell-code}\n# 5. (2)연도별 범죄 발생 비율 파생변수 추가\n## pd.options.display.float_format : 소수점 둘째 자리까지만 보이도록 설정\npd.options.display.float_format = '{:.2f}'.format\n\nfor i in [\"_s\", \"_g\" ,\"_i\" ,\"\"]:\n    for j in range(2018, 2023):\n        crime.loc[crime['year'] == j, 'total'+ i +'_year'] = sum(crime.loc[crime['year'] == j,'total' + i])\n    crime['ratio'+ i +'_day'] = crime['total' + i] / crime['total'+ i +'_year'] * 100\n\n## 아래 코드도 같은 결과 \n### crime = crime.assign(\n###               total_s_year = lambda x: x.groupby('year')['total_s'].transform('sum'), \n###               ratio_s_day = lambda x: x['total_s'] / x['total_s_year'] * 100,\n###\n###               total_g_year = lambda x: x.groupby('year')['total_g'].transform('sum'),\n###               ratio_g_day = lambda x: x['total_g'] / x['total_g_year'] * 100,\n###\n###               total_i_year = lambda x: x.groupby('year')['total_i'].transform('sum'),\n###               ratio_i_day = lambda x: x['total_i'] / x['total_i_year'] * 100,\n###\n###               total_year = lambda x: x.groupby('year')['total'].transform('sum'),\n###               ratio_day = lambda x: x['total'] / x['total_year'] * 100)\n    \ncrime.head(10)\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>year</th>\n      <th>day</th>\n      <th>s_살인기수</th>\n      <th>s_살인미수등</th>\n      <th>s_강도</th>\n      <th>s_강간</th>\n      <th>s_유사강간</th>\n      <th>s_강제추행</th>\n      <th>s_기타 강간·강제추행등</th>\n      <th>s_방화</th>\n      <th>g_상해</th>\n      <th>g_폭행</th>\n      <th>g_체포·감금</th>\n      <th>g_협박</th>\n      <th>g_약취·유인</th>\n      <th>g_폭력행위등</th>\n      <th>g_공갈</th>\n      <th>g_손괴</th>\n      <th>i_직무유기</th>\n      <th>i_직권남용</th>\n      <th>i_증수뢰</th>\n      <th>i_통화</th>\n      <th>i_문서·인장</th>\n      <th>i_유가증권인지</th>\n      <th>i_사기</th>\n      <th>i_횡령</th>\n      <th>i_배임</th>\n      <th>total_s</th>\n      <th>total_g</th>\n      <th>total_i</th>\n      <th>total</th>\n      <th>day_label</th>\n      <th>total_s_year</th>\n      <th>ratio_s_day</th>\n      <th>total_g_year</th>\n      <th>ratio_g_day</th>\n      <th>total_i_year</th>\n      <th>ratio_i_day</th>\n      <th>total_year</th>\n      <th>ratio_day</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>1</th>\n      <td>2018</td>\n      <td>mon</td>\n      <td>40</td>\n      <td>74</td>\n      <td>120</td>\n      <td>698</td>\n      <td>113</td>\n      <td>2197</td>\n      <td>51</td>\n      <td>236</td>\n      <td>5326</td>\n      <td>20195</td>\n      <td>168</td>\n      <td>2462</td>\n      <td>34</td>\n      <td>1175</td>\n      <td>685</td>\n      <td>7452</td>\n      <td>105</td>\n      <td>96</td>\n      <td>53</td>\n      <td>230</td>\n      <td>2202</td>\n      <td>20</td>\n      <td>45478</td>\n      <td>7968</td>\n      <td>802</td>\n      <td>3529</td>\n      <td>37497</td>\n      <td>56954</td>\n      <td>97980</td>\n      <td>week</td>\n      <td>26787.00</td>\n      <td>13.17</td>\n      <td>287611.00</td>\n      <td>13.04</td>\n      <td>344698.00</td>\n      <td>16.52</td>\n      <td>659096.00</td>\n      <td>14.87</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2018</td>\n      <td>tue</td>\n      <td>38</td>\n      <td>62</td>\n      <td>133</td>\n      <td>709</td>\n      <td>103</td>\n      <td>2263</td>\n      <td>48</td>\n      <td>263</td>\n      <td>5649</td>\n      <td>21334</td>\n      <td>189</td>\n      <td>2530</td>\n      <td>27</td>\n      <td>1205</td>\n      <td>644</td>\n      <td>7767</td>\n      <td>92</td>\n      <td>110</td>\n      <td>57</td>\n      <td>226</td>\n      <td>1992</td>\n      <td>25</td>\n      <td>45020</td>\n      <td>7793</td>\n      <td>761</td>\n      <td>3619</td>\n      <td>39345</td>\n      <td>56076</td>\n      <td>99040</td>\n      <td>week</td>\n      <td>26787.00</td>\n      <td>13.51</td>\n      <td>287611.00</td>\n      <td>13.68</td>\n      <td>344698.00</td>\n      <td>16.27</td>\n      <td>659096.00</td>\n      <td>15.03</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2018</td>\n      <td>wed</td>\n      <td>53</td>\n      <td>68</td>\n      <td>116</td>\n      <td>743</td>\n      <td>96</td>\n      <td>2333</td>\n      <td>49</td>\n      <td>235</td>\n      <td>5395</td>\n      <td>21160</td>\n      <td>180</td>\n      <td>2474</td>\n      <td>26</td>\n      <td>1088</td>\n      <td>604</td>\n      <td>7681</td>\n      <td>92</td>\n      <td>110</td>\n      <td>69</td>\n      <td>208</td>\n      <td>1893</td>\n      <td>30</td>\n      <td>45399</td>\n      <td>7922</td>\n      <td>725</td>\n      <td>3693</td>\n      <td>38608</td>\n      <td>56448</td>\n      <td>98749</td>\n      <td>week</td>\n      <td>26787.00</td>\n      <td>13.79</td>\n      <td>287611.00</td>\n      <td>13.42</td>\n      <td>344698.00</td>\n      <td>16.38</td>\n      <td>659096.00</td>\n      <td>14.98</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>2018</td>\n      <td>thu</td>\n      <td>41</td>\n      <td>76</td>\n      <td>117</td>\n      <td>646</td>\n      <td>99</td>\n      <td>2389</td>\n      <td>45</td>\n      <td>246</td>\n      <td>5396</td>\n      <td>21181</td>\n      <td>192</td>\n      <td>2444</td>\n      <td>30</td>\n      <td>1163</td>\n      <td>656</td>\n      <td>7514</td>\n      <td>114</td>\n      <td>110</td>\n      <td>64</td>\n      <td>242</td>\n      <td>2710</td>\n      <td>32</td>\n      <td>45752</td>\n      <td>7992</td>\n      <td>730</td>\n      <td>3659</td>\n      <td>38576</td>\n      <td>57746</td>\n      <td>99981</td>\n      <td>week</td>\n      <td>26787.00</td>\n      <td>13.66</td>\n      <td>287611.00</td>\n      <td>13.41</td>\n      <td>344698.00</td>\n      <td>16.75</td>\n      <td>659096.00</td>\n      <td>15.17</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>2018</td>\n      <td>fri</td>\n      <td>54</td>\n      <td>67</td>\n      <td>101</td>\n      <td>699</td>\n      <td>99</td>\n      <td>2547</td>\n      <td>55</td>\n      <td>212</td>\n      <td>5628</td>\n      <td>22423</td>\n      <td>165</td>\n      <td>2408</td>\n      <td>26</td>\n      <td>1206</td>\n      <td>593</td>\n      <td>8591</td>\n      <td>103</td>\n      <td>104</td>\n      <td>61</td>\n      <td>212</td>\n      <td>1991</td>\n      <td>58</td>\n      <td>46698</td>\n      <td>8817</td>\n      <td>790</td>\n      <td>3834</td>\n      <td>41040</td>\n      <td>58834</td>\n      <td>103708</td>\n      <td>week</td>\n      <td>26787.00</td>\n      <td>14.31</td>\n      <td>287611.00</td>\n      <td>14.27</td>\n      <td>344698.00</td>\n      <td>17.07</td>\n      <td>659096.00</td>\n      <td>15.73</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>2018</td>\n      <td>sat</td>\n      <td>29</td>\n      <td>69</td>\n      <td>108</td>\n      <td>892</td>\n      <td>139</td>\n      <td>2760</td>\n      <td>59</td>\n      <td>243</td>\n      <td>6267</td>\n      <td>26997</td>\n      <td>151</td>\n      <td>2384</td>\n      <td>15</td>\n      <td>1662</td>\n      <td>457</td>\n      <td>9200</td>\n      <td>36</td>\n      <td>40</td>\n      <td>21</td>\n      <td>42</td>\n      <td>829</td>\n      <td>15</td>\n      <td>22158</td>\n      <td>7819</td>\n      <td>288</td>\n      <td>4299</td>\n      <td>47133</td>\n      <td>31248</td>\n      <td>82680</td>\n      <td>weekend</td>\n      <td>26787.00</td>\n      <td>16.05</td>\n      <td>287611.00</td>\n      <td>16.39</td>\n      <td>344698.00</td>\n      <td>9.07</td>\n      <td>659096.00</td>\n      <td>12.54</td>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>2018</td>\n      <td>sun</td>\n      <td>54</td>\n      <td>72</td>\n      <td>126</td>\n      <td>906</td>\n      <td>127</td>\n      <td>2564</td>\n      <td>49</td>\n      <td>256</td>\n      <td>6105</td>\n      <td>25977</td>\n      <td>162</td>\n      <td>2498</td>\n      <td>29</td>\n      <td>1705</td>\n      <td>457</td>\n      <td>8479</td>\n      <td>39</td>\n      <td>33</td>\n      <td>22</td>\n      <td>34</td>\n      <td>673</td>\n      <td>17</td>\n      <td>19524</td>\n      <td>6802</td>\n      <td>248</td>\n      <td>4154</td>\n      <td>45412</td>\n      <td>27392</td>\n      <td>76958</td>\n      <td>weekend</td>\n      <td>26787.00</td>\n      <td>15.51</td>\n      <td>287611.00</td>\n      <td>15.79</td>\n      <td>344698.00</td>\n      <td>7.95</td>\n      <td>659096.00</td>\n      <td>11.68</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>2019</td>\n      <td>mon</td>\n      <td>45</td>\n      <td>70</td>\n      <td>113</td>\n      <td>686</td>\n      <td>99</td>\n      <td>2272</td>\n      <td>53</td>\n      <td>181</td>\n      <td>4908</td>\n      <td>19966</td>\n      <td>189</td>\n      <td>3013</td>\n      <td>40</td>\n      <td>1126</td>\n      <td>818</td>\n      <td>7974</td>\n      <td>108</td>\n      <td>126</td>\n      <td>46</td>\n      <td>186</td>\n      <td>2130</td>\n      <td>22</td>\n      <td>52740</td>\n      <td>8559</td>\n      <td>859</td>\n      <td>3519</td>\n      <td>38034</td>\n      <td>64776</td>\n      <td>106329</td>\n      <td>week</td>\n      <td>26476.00</td>\n      <td>13.29</td>\n      <td>287913.00</td>\n      <td>13.21</td>\n      <td>381533.00</td>\n      <td>16.98</td>\n      <td>695922.00</td>\n      <td>15.28</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>2019</td>\n      <td>tue</td>\n      <td>48</td>\n      <td>68</td>\n      <td>116</td>\n      <td>734</td>\n      <td>109</td>\n      <td>2306</td>\n      <td>45</td>\n      <td>181</td>\n      <td>5063</td>\n      <td>20766</td>\n      <td>170</td>\n      <td>3039</td>\n      <td>41</td>\n      <td>1100</td>\n      <td>740</td>\n      <td>7634</td>\n      <td>123</td>\n      <td>118</td>\n      <td>42</td>\n      <td>169</td>\n      <td>1971</td>\n      <td>16</td>\n      <td>51876</td>\n      <td>8128</td>\n      <td>730</td>\n      <td>3607</td>\n      <td>38553</td>\n      <td>63173</td>\n      <td>105333</td>\n      <td>week</td>\n      <td>26476.00</td>\n      <td>13.62</td>\n      <td>287913.00</td>\n      <td>13.39</td>\n      <td>381533.00</td>\n      <td>16.56</td>\n      <td>695922.00</td>\n      <td>15.14</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>2019</td>\n      <td>wed</td>\n      <td>40</td>\n      <td>62</td>\n      <td>105</td>\n      <td>719</td>\n      <td>92</td>\n      <td>2358</td>\n      <td>49</td>\n      <td>209</td>\n      <td>5038</td>\n      <td>20981</td>\n      <td>171</td>\n      <td>3072</td>\n      <td>34</td>\n      <td>1086</td>\n      <td>757</td>\n      <td>7766</td>\n      <td>106</td>\n      <td>97</td>\n      <td>52</td>\n      <td>187</td>\n      <td>1840</td>\n      <td>30</td>\n      <td>51225</td>\n      <td>8318</td>\n      <td>787</td>\n      <td>3634</td>\n      <td>38905</td>\n      <td>62642</td>\n      <td>105181</td>\n      <td>week</td>\n      <td>26476.00</td>\n      <td>13.73</td>\n      <td>287913.00</td>\n      <td>13.51</td>\n      <td>381533.00</td>\n      <td>16.42</td>\n      <td>695922.00</td>\n      <td>15.11</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {#fe048565 .cell execution_count=6}\n``` {.python .cell-code}\n# 5. (3)연도/요일별 범죄 발생 비율 변화 그래프\n## 연도/요일별 범죄 발생 비율표 생성\nratio_year_day = crime.iloc[:, [0, 1, -7, -5, -3, -1]]\nratio_year_day.head(7)\n\n## 강력범죄 연도/요일별 범죄 발생 비율 변화 그래프\n### plt.xticks() : x축의 범위를 2018~2022로 설정\nsns.lineplot(data = ratio_year_day, x = 'day', y = 'ratio_s_day', hue = 'year')\nplt.xlabel(\"요일\")\nplt.ylabel(\"비율(%)\")\nplt.title(\"강력범죄 요일별 범죄율 비교 그래프\")\nplt.show()\nplt.clf()\n\n## 폭력범죄 연도/요일별 범죄 발생 비율 변화 그래프\nsns.lineplot(data = ratio_year_day, x = 'day', y = 'ratio_g_day', hue = 'year')\nplt.xlabel(\"요일\")\nplt.ylabel(\"비율(%)\")\nplt.title(\"폭력범죄 요일별 범죄율 비교 그래프\")\nplt.show()\nplt.clf()\n\n## 지능범죄 연도/요일별 범죄 발생 비율 변화 그래프\nsns.lineplot(data = ratio_year_day, x = 'day', y = 'ratio_i_day', hue = 'year')\nplt.xlabel(\"요일\")\nplt.ylabel(\"비율(%)\")\nplt.title(\"지능범죄 요일별 범죄율 비교 그래프\")\nplt.show()\nplt.clf()\n\n## 전체 범죄 연도/요일별 범죄 발생 비율 변화 그래프\nsns.lineplot(data = ratio_year_day, x = 'day', y = 'ratio_day', hue = 'year')\nplt.xlabel(\"요일\")\nplt.ylabel(\"비율(%)\")\nplt.title(\"전체 범죄 요일별 범죄율 비교 그래프\")\nplt.show()\nplt.clf()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-7-output-1.png){width=594 height=449}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-7-output-2.png){width=594 height=449}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-7-output-3.png){width=583 height=449}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-7-output-4.png){width=583 height=449}\n:::\n\n::: {.cell-output .cell-output-display}\n```\n<Figure size 672x480 with 0 Axes>\n```\n:::\n:::\n\n\n::: {.callout-important icon=false}\n## 위 그래프의 한계\n\n범죄별 그래프로 각 범죄의 요일별 발생 비율은 파악할 수 있으나,\n: **지능범죄의 주말 발생 건수가 현저히 낮아 전체 그래프에서 왜곡이 발생**\n: 따라서, 연도 기준으로 데이터를 비교하는데 오류가 있다는 판단\n:::\n\n\n### **[요일 기준 범죄별 비율 비교 그래프]**\n\n::: {#8bde0c78 .cell execution_count=7}\n``` {.python .cell-code}\n# 6. 요일별 전체 범죄 발생 비율 그래프\n## 요일별 전체 범죄 발생 비율표 생성\ntotal_day = crime.groupby('day') \\\n                 .agg(total_s = ('total_s', 'sum'),\n                      total_g = ('total_g', 'sum'),\n                      total_i = ('total_i', 'sum'),\n                      total = ('total', 'sum'))\n\ntotal_day = total_day.assign(\n    강력범죄 = lambda x: x['total_s'] / sum(x['total_s']) * 100,\n    폭력범죄 = lambda x: x['total_g'] / sum(x['total_g']) * 100,\n    지능범죄 = lambda x: x['total_i'] / sum(x['total_i']) * 100,\n    총_범죄율 = lambda x: x['total'] / sum(x['total']) * 100)\n\ntotal_day = total_day.reindex(index=['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'])\n\nratio_total_day = total_day.iloc[:, 4:]\nratio_total_day\n\n## 요일별 전체 범죄 발생 비율 그래프 생성\nsns.lineplot(data = ratio_total_day)\nplt.xlabel(\"요일\")\nplt.ylabel(\"비율(%)\")\nplt.title(\"요일 기준 범죄율 비교 그래프\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-8-output-1.png){width=583 height=449}\n:::\n:::\n\n\n::: {.callout-note icon=false}\n\n## 결론\n\n**강력범죄/폭력범죄는 가설에 성립하지만, 지능범죄는 반대의 결과가 도출되었다.**\n: **따라서, 강력범죄는 화요일/폭력범죄는 월요일/지능범죄는 일요일이 가장 안전하다.**\n\n:::\n\n::: {.callout-caution icon=false}\n## 생각해볼 점\n\n**지능범죄가 평일에 많이 발생하는 이유는, 공공기관/기업 업무 시간에 이루어져야 하는 행위가 많기 때문이라고 추측된다.**\n:::\n\n::: {.callout-caution icon=false}\n## 분석 발전 방향\n* **데이터 추가**\n   - **범죄 발생 시간** : 특정 요일의 어느 시간대에 범죄가 주로 발생하는지 분석\n   - **사회적/경제적 요인** : 실업률, 소득 수준, 인구 밀도 등 사회적/경제적 요인으로 차이가 있는지 분석\n   - **이벤트/축제 정보** : 특정 요일과 기간에 개최된 이벤트, 축제, 공휴일 등의 요인으로 차이가 있는지 분석\n:::\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}